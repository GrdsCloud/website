<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Squidsdocs â€“ Installation</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/</link><description>Recent content in Installation on Squidsdocs</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Wed, 25 Nov 2020 00:00:00 +0000</lastBuildDate><atom:link href="https://squids-io.github.io/website/docs/mysql-operator/installation/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Prerequisites</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/prerequisites/</link><pubDate>Wed, 25 Nov 2020 00:00:00 +0000</pubDate><guid>https://squids-io.github.io/website/docs/mysql-operator/installation/prerequisites/</guid><description>
&lt;p>The following is required prior to installing MySQL Operator.&lt;/p>
&lt;h2 id="environment">Environment&lt;/h2>
&lt;p>The MySQL Operator is tested in the following environments:&lt;/p>
&lt;ul>
&lt;li>Kubernetes v1.14.x or k3s&lt;/li>
&lt;li>Amazon EKS&lt;/li>
&lt;/ul>
&lt;h2 id="client-interfaces">Client Interfaces&lt;/h2>
&lt;p>The MySQL Operator installer will install the &lt;a href="https://squids-io.github.io/website/website/docs/squids-client/">&lt;code>squids&lt;/code> client&lt;/a> interface
to help with using the MySQL Operator. However, it is also recommend that
you have access to &lt;a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">&lt;code>kubectl&lt;/code>&lt;/a> and are able to communicate with the
Kubernetes cluster that you are working with.&lt;/p>
&lt;h2 id="ports">Ports&lt;/h2>
&lt;p>There are several application ports to note when using the MySQL Operator.
These ports allow for the &lt;a href="https://squids-io.github.io/website/website/docs/squids-client/">&lt;code>squids&lt;/code> client&lt;/a>
to interface with the MySQL Operator API:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Container&lt;/th>
&lt;th>Port&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>API Server&lt;/td>
&lt;td>8443&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docs: Deploy MySQL Operator from Kubernetes Manifests</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/manifest/</link><pubDate>Wed, 25 Nov 2020 00:00:00 +0000</pubDate><guid>https://squids-io.github.io/website/docs/mysql-operator/installation/manifest/</guid><description>
&lt;h2 id="deploy-mysql-operator-from-kubernetes-manifests">Deploy MySQL operator from Kubernetes Manifests&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>Create a Namespace called &amp;ldquo;squids&amp;rdquo;.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">kubectl create ns squids
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Create a ServiceAccount and install cluster roles.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">kubectl -n squids create -f https://raw.githubusercontent.com/squids-io/grds/v1.0.0/installers/manifests/rbac.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Apply the CRD.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">kubectl -n squids create -f https://raw.githubusercontent.com/squids-io/grds/v1.0.0/installers/manifests/mysql.squids.io_mysqlclusters.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Deploy the MySQL operator.&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">kubectl -n squids create -f https://raw.githubusercontent.com/squids-io/grds/v1.0.0/installers/manifests/deployment.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;h3 id="check-the-mysql-operator-deployment">Check the MySQL operator deployment&lt;/h3>
&lt;p>To verify that the installation was successful, complete the following steps.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Check the status of the pods. You should see a new mysql-operator pod&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get pods -n squids
NAME READY STATUS RESTARTS AGE
mysql-operator-76c44cdc5c-lw4z6 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Check the CRDs. You should see the following MySQL cluster CRDs.
mysql-cluster-crd.png&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get crd &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep squids
NAME CREATED AT
mysqlclusters.mysql.squids.io 2020-10-28T09:53:01Z
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Docs: Deploy MySQL operator with Helm</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/helm/</link><pubDate>Wed, 25 Nov 2020 00:00:00 +0000</pubDate><guid>https://squids-io.github.io/website/docs/mysql-operator/installation/helm/</guid><description>
&lt;p align="center">&lt;img src="https://squids-io.github.io/website/website/images/helm2.svg" width="150">&lt;/p>
&lt;blockquote>
&lt;p>Note: For the Helm-based installation you need &lt;a href="https://helm.sh/docs/intro/install/#helm">Helm&lt;/a> v3.2.4 or later.&lt;/p>
&lt;/blockquote>
&lt;ol>
&lt;li>
&lt;p>Add operator chart repository.&lt;/p>
&lt;ul>
&lt;li>Helm v3&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">helm repo add squids-stable https://squids-io.github.io/charts/
helm repo update
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Install the MySQL Operator&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">helm upgrade --install --wait --create-namespace --namespace squids mysql-operator squids-stable/mysql-operator
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;blockquote>
&lt;p>If you using k3s,sometimes helm will not access k3s cluster,please copy the k3s.yaml to .kube/config,refer to &lt;a href="https://rancher.com/docs/k3s/latest/en/cluster-access">k3s cluster access&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;pre>&lt;code>$ helm list -A
Error: Kubernetes cluster unreachable: Get &amp;quot;http://localhost:8080/version?timeout=32s&amp;quot;: dial tcp [::1]:8080: connect: connection refused
cp /etc/rancher/k3s/k3s.yaml ~/.kube/config
&lt;/code>&lt;/pre>&lt;h3 id="check-the-mysql-operator-deployment">Check the MySQL operator deployment&lt;/h3>
&lt;p>To verify that the installation was successful, complete the following steps.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Check the status of the pods. You should see a new mysql-operator pod&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get pods -n squids
NAME READY STATUS RESTARTS AGE
mysql-operator-76c44cdc5c-lw4z6 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Check the CRDs. You should see the following MySQL cluster CRDs.
mysql-cluster-crd.png&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get crd &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep squids
NAME CREATED AT
mysqlclusters.mysql.squids.io 2020-10-28T09:53:01Z
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Docs: OperatorHub.io</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/operator-hub/</link><pubDate>Wed, 25 Nov 2020 00:00:00 +0000</pubDate><guid>https://squids-io.github.io/website/docs/mysql-operator/installation/operator-hub/</guid><description>
&lt;p>If your Kubernetes cluster is already running the &lt;a href="https://olm.operatorframework.io/">Operator Lifecycle Manager&lt;/a>,
the MySQL Operator can be installed as part of &lt;a href="https://operatorhub.io/operator/mysql">Squids MySQL for Kubernetes&lt;/a>
that is available in OperatorHub.io.&lt;/p>
&lt;h2 id="before-you-begin">Before You Begin&lt;/h2>
&lt;blockquote>
&lt;p>Note: For the &lt;a href="https://olm.operatorframework.io/docs/getting-started/">OLM installation&lt;/a>.&lt;/p>
&lt;/blockquote>
&lt;p>First, make sure OLM and the OperatorHub.io catalog are installed by running
&lt;code>kubectl get CatalogSources --all-namespaces&lt;/code>. You should see something similar to the following:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">NAMESPACE NAME DISPLAY TYPE PUBLISHER
olm operatorhubio-catalog Community Operators grpc OperatorHub.io
&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="subscription-mysql-operator">Subscription MySQL Operator&lt;/h2>
&lt;p>Install the operator by running the following command&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">kubectl create -f https://operatorhub.io/install/mysql.yaml
&lt;/code>&lt;/pre>&lt;/div>&lt;p>This Operator will be installed in the &amp;ldquo;operators&amp;rdquo; namespace and will be usable from all namespaces in the cluster.&lt;/p>
&lt;h2 id="check-the-mysql-operator-deployment">Check the MySQL operator deployment&lt;/h2>
&lt;p>To verify that the installation was successful, complete the following steps.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Check the status of the pods. You should see a new mysql-operator pod&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get pods -n operator
NAME READY STATUS RESTARTS AGE
mysql-operator-76c44cdc5c-lw4z6 1/1 Running &lt;span style="color:#0000cf;font-weight:bold">0&lt;/span> 53s
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>
&lt;p>Check the CRDs. You should see the following MySQL cluster CRDs.
mysql-cluster-crd.png&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-bash" data-lang="bash">$ kubectl get crd &lt;span style="color:#000;font-weight:bold">|&lt;/span> grep operator
NAME CREATED AT
mysqlclusters.mysql.squids.io 2020-10-28T09:53:01Z
&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol></description></item><item><title>Docs: Install squids CLI</title><link>https://squids-io.github.io/website/docs/mysql-operator/installation/squids-client/</link><pubDate>Wed, 25 Nov 2020 00:00:00 +0000</pubDate><guid>https://squids-io.github.io/website/docs/mysql-operator/installation/squids-client/</guid><description>
&lt;p>&lt;code>squidsctl&lt;/code> client is a command tool for k8s database operator management,we recommend using &lt;code>squidsctl&lt;/code> to manage database operator in terminal console.
After database operator deployment,you can run following command to install &lt;code>squidsctl&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">&lt;code class="language-shell" data-lang="shell">curl https://raw.githubusercontent.com/squids-io/grds/v1.0.0/installers/kubectl/client-setup.sh &amp;gt; client-setup.sh
chmod +x client-setup.sh
./client-setup.sh
&lt;/code>&lt;/pre>&lt;/div>&lt;p>It will prompt for some environment variables,you should add these environment variables to bash profile:&lt;/p>
&lt;pre>&lt;code>cat &amp;lt;&amp;lt;EOF &amp;gt;&amp;gt; ~/.bash_profile
export SQUIDS_CA_CERT=&amp;quot;${HOME?}/.squids/client.crt&amp;quot;
export SQUIDS_CLIENT_CERT=&amp;quot;${HOME?}/.squids/client.crt&amp;quot;
export SQUIDS_CLIENT_KEY=&amp;quot;${HOME?}/.squids/client.key&amp;quot;
export SQUIDS_APISERVER_URL='https://127.0.0.1:8443'
export SQUIDS_NAMESPACE=squids
EOF
source ~/.bash_profile
&lt;/code>&lt;/pre></description></item></channel></rss>